
# Dockerfile چیست؟
یک فایل متنی ساده است که شامل دستوراتی می‌شود که برای ساخت یک **تصویر داکر** (Docker Image) استفاده می‌شوند. به زبان ساده، داکر فایل به داکر می‌گوید که چگونه یک تصویر را مرحله به مرحله بسازد.

---

## دستورات مهم در Dockerfile

| دستور        | توضیح                                                                 |
|--------------|-----------------------------------------------------------------------|
| **`FROM`**   | مشخص می‌کند تصویر پایه‌ای که استفاده می‌شود چیست.                     |
| **`RUN`**    | برای اجرای دستورات در حین ساخت تصویر استفاده می‌شود.                  |
| **`COPY`**   | برای کپی کردن فایل‌ها از سیستم میزبان به داخل تصویر داکر.            |
| **`WORKDIR`**| مشخص کردن دایرکتوری کاری پیش‌فرض.                                    |
| **`CMD`**    | دستور اصلی برای اجرای برنامه هنگام اجرای کانتینر.                     |
| **`EXPOSE`** | باز کردن پورت در کانتینر برای برقراری ارتباط.                         |

---

## مثال کامل Dockerfile

فرض کنید می‌خواهیم یک برنامه ساده **Python** را که از فایل `app.py` استفاده می‌کند، داخل یک تصویر داکر اجرا کنیم.

### ساختار پروژه:
```plaintext
project/
│
├── Dockerfile
└── app.py
```

---

### محتوای `app.py`:
```python
from flask import Flask

app = Flask(__name__)

@app.route("/")
def home():
    return "Hello, Docker World!"

if __name__ == "__main__":
    app.run(debug=True, host='0.0.0.0', port=5000)
```

---

### محتوای Dockerfile:
```dockerfile
# 1. استفاده از تصویر پایه Python
FROM python:3.9

# 2. تنظیم دایرکتوری کاری درون کانتینر
WORKDIR /app

# 3. کپی کردن فایل‌های پروژه به داخل کانتینر
COPY . /app

# 4. نصب پیش‌نیازها (پکیج‌های Python)
RUN pip install flask

# 5. باز کردن پورت 5000 برای ارتباط
EXPOSE 5000

# 6. دستور برای اجرای برنامه
CMD ["python", "app.py"]
```

---

## ساخت و اجرای تصویر داکر

### 1. ساخت تصویر داکر
```bash
docker build -t my-flask-app .
```
- **`-t my-flask-app`**: نام و تگ تصویر را `my-flask-app` می‌گذاریم.  
- **`.`**: مسیر Dockerfile.

### 2. اجرای کانتینر
```bash
docker run -p 5000:5000 my-flask-app
```
- **`-p 5000:5000`**: پورت 5000 روی کانتینر به پورت 5000 روی میزبان نگاشت می‌شود.

---

## خروجی:
بعد از اجرای کانتینر، با مراجعه به آدرس زیر در مرورگر، خروجی را مشاهده می‌کنید:

```
http://localhost:5000
```

خروجی:
```
Hello, Docker World!
```

---

## خلاصه مراحل:
1. **نوشتن Dockerfile**: شامل دستورات پایه مثل `FROM`، `RUN` و `CMD`.  
2. **ساخت تصویر**: با استفاده از دستور `docker build`.  
3. **اجرای کانتینر**: با استفاده از دستور `docker run`.  
4. **مشاهده خروجی**: بررسی برنامه در پورت مشخص‌شده.

این مثال نحوه کار با Dockerfile برای ساخت و اجرای یک برنامه ساده Python-Flask را نشان می‌دهد.
